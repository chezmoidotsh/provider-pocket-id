---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.5
  name: oidcclientgroupbindings.pocketid.crossplane.io
spec:
  group: pocketid.crossplane.io
  names:
    categories:
      - crossplane
      - managed
      - pocketid
    kind: OIDCClientGroupBinding
    listKind: OIDCClientGroupBindingList
    plural: oidcclientgroupbindings
    singular: oidcclientgroupbinding
  scope: Cluster
  versions:
    - additionalPrinterColumns:
        - jsonPath: .status.conditions[?(@.type=='Ready')].status
          name: READY
          type: string
        - jsonPath: .status.conditions[?(@.type=='Synced')].status
          name: SYNCED
          type: string
        - jsonPath: .status.atProvider.client.name
          name: CLIENT-NAME
          type: string
        - jsonPath: .status.atProvider.group.name
          name: GROUP-NAME
          type: string
        - jsonPath: .metadata.creationTimestamp
          name: AGE
          type: date
      name: v1alpha1
      schema:
        openAPIV3Schema:
          description: |-
            An OIDCClientGroupBinding associates an OIDC client with a group in Pocket ID.
            This allows you to restrict which users (based on their group membership)
            can access specific OIDC applications. Only users who belong to the bound
            group will be able to authenticate to the OIDC client.
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description:
                An OIDCClientGroupBindingSpec defines the desired state of
                an OIDCClientGroupBinding.
              properties:
                deletionPolicy:
                  default: Delete
                  description: |-
                    DeletionPolicy specifies what will happen to the underlying external
                    when this managed resource is deleted - either "Delete" or "Orphan" the
                    external resource.
                    This field is planned to be deprecated in favor of the ManagementPolicies
                    field in a future release. Currently, both could be set independently and
                    non-default values would be honored if the feature flag is enabled.
                    See the design doc for more information: https://github.com/crossplane/crossplane/blob/499895a25d1a1a0ba1604944ef98ac7a1a71f197/design/design-doc-observe-only-resources.md?plain=1#L223
                  enum:
                    - Orphan
                    - Delete
                  type: string
                forProvider:
                  description:
                    OIDCClientGroupBindingParameters are the configurable
                    fields of an OIDCClientGroupBinding.
                  properties:
                    clientId:
                      description: |-
                        ClientID is the ID of the OIDC client to bind to a group.
                        The client must already exist in Pocket ID.
                      type: string
                    clientIdRef:
                      description: |-
                        ClientIDRef is a reference to an OIDCClient resource to bind to a group.
                        This creates a dependency on the referenced OIDCClient resource.
                      properties:
                        name:
                          description: Name of the referenced object.
                          type: string
                        policy:
                          description: Policies for referencing.
                          properties:
                            resolution:
                              default: Required
                              description: |-
                                Resolution specifies whether resolution of this reference is required.
                                The default is 'Required', which means the reconcile will fail if the
                                reference cannot be resolved. 'Optional' means this reference will be
                                a no-op if it cannot be resolved.
                              enum:
                                - Required
                                - Optional
                              type: string
                            resolve:
                              description: |-
                                Resolve specifies when this reference should be resolved. The default
                                is 'IfNotPresent', which will attempt to resolve the reference only when
                                the corresponding field is not present. Use 'Always' to resolve the
                                reference on every reconcile.
                              enum:
                                - Always
                                - IfNotPresent
                              type: string
                          type: object
                      required:
                        - name
                      type: object
                    clientIdSelector:
                      description:
                        ClientIDSelector selects an OIDCClient resource to
                        bind to a group.
                      properties:
                        matchControllerRef:
                          description: |-
                            MatchControllerRef ensures an object with the same controller reference
                            as the selecting object is selected.
                          type: boolean
                        matchLabels:
                          additionalProperties:
                            type: string
                          description:
                            MatchLabels ensures an object with matching labels
                            is selected.
                          type: object
                        policy:
                          description: Policies for selection.
                          properties:
                            resolution:
                              default: Required
                              description: |-
                                Resolution specifies whether resolution of this reference is required.
                                The default is 'Required', which means the reconcile will fail if the
                                reference cannot be resolved. 'Optional' means this reference will be
                                a no-op if it cannot be resolved.
                              enum:
                                - Required
                                - Optional
                              type: string
                            resolve:
                              description: |-
                                Resolve specifies when this reference should be resolved. The default
                                is 'IfNotPresent', which will attempt to resolve the reference only when
                                the corresponding field is not present. Use 'Always' to resolve the
                                reference on every reconcile.
                              enum:
                                - Always
                                - IfNotPresent
                              type: string
                          type: object
                      type: object
                    groupId:
                      description: |-
                        GroupID is the ID of the group to bind the OIDC client to.
                        The group must already exist in Pocket ID.
                      minLength: 1
                      type: string
                    groupIdRef:
                      description: |-
                        GroupIDRef is a reference to a Group resource to bind the client to.
                        This creates a dependency on the referenced Group resource.
                      properties:
                        name:
                          description: Name of the referenced object.
                          type: string
                        policy:
                          description: Policies for referencing.
                          properties:
                            resolution:
                              default: Required
                              description: |-
                                Resolution specifies whether resolution of this reference is required.
                                The default is 'Required', which means the reconcile will fail if the
                                reference cannot be resolved. 'Optional' means this reference will be
                                a no-op if it cannot be resolved.
                              enum:
                                - Required
                                - Optional
                              type: string
                            resolve:
                              description: |-
                                Resolve specifies when this reference should be resolved. The default
                                is 'IfNotPresent', which will attempt to resolve the reference only when
                                the corresponding field is not present. Use 'Always' to resolve the
                                reference on every reconcile.
                              enum:
                                - Always
                                - IfNotPresent
                              type: string
                          type: object
                      required:
                        - name
                      type: object
                    groupIdSelector:
                      description:
                        GroupIDSelector selects a Group resource to bind
                        the client to.
                      properties:
                        matchControllerRef:
                          description: |-
                            MatchControllerRef ensures an object with the same controller reference
                            as the selecting object is selected.
                          type: boolean
                        matchLabels:
                          additionalProperties:
                            type: string
                          description:
                            MatchLabels ensures an object with matching labels
                            is selected.
                          type: object
                        policy:
                          description: Policies for selection.
                          properties:
                            resolution:
                              default: Required
                              description: |-
                                Resolution specifies whether resolution of this reference is required.
                                The default is 'Required', which means the reconcile will fail if the
                                reference cannot be resolved. 'Optional' means this reference will be
                                a no-op if it cannot be resolved.
                              enum:
                                - Required
                                - Optional
                              type: string
                            resolve:
                              description: |-
                                Resolve specifies when this reference should be resolved. The default
                                is 'IfNotPresent', which will attempt to resolve the reference only when
                                the corresponding field is not present. Use 'Always' to resolve the
                                reference on every reconcile.
                              enum:
                                - Always
                                - IfNotPresent
                              type: string
                          type: object
                      type: object
                  type: object
                  x-kubernetes-validations:
                    - message:
                        Exactly one of clientId, clientIdRef or clientIdSelector
                        must be specified.
                      rule:
                        "(has(self.clientId) ? 1 : 0) + (self.clientIdRef != null
                        ? 1 : 0) + (self.clientIdSelector != null ? 1 : 0) == 1"
                    - message:
                        Exactly one of groupId, groupIdRef or groupIdSelector must
                        be specified.
                      rule:
                        "(has(self.groupId) ? 1 : 0) + (self.groupIdRef != null ?
                        1 : 0) + (self.groupIdSelector != null ? 1 : 0) == 1"
                managementPolicies:
                  default:
                    - "*"
                  description: |-
                    THIS IS A BETA FIELD. It is on by default but can be opted out
                    through a Crossplane feature flag.
                    ManagementPolicies specify the array of actions Crossplane is allowed to
                    take on the managed and external resources.
                    This field is planned to replace the DeletionPolicy field in a future
                    release. Currently, both could be set independently and non-default
                    values would be honored if the feature flag is enabled. If both are
                    custom, the DeletionPolicy field will be ignored.
                    See the design doc for more information: https://github.com/crossplane/crossplane/blob/499895a25d1a1a0ba1604944ef98ac7a1a71f197/design/design-doc-observe-only-resources.md?plain=1#L223
                    and this one: https://github.com/crossplane/crossplane/blob/444267e84783136daa93568b364a5f01228cacbe/design/one-pager-ignore-changes.md
                  items:
                    description: |-
                      A ManagementAction represents an action that the Crossplane controllers
                      can take on an external resource.
                    enum:
                      - Observe
                      - Create
                      - Update
                      - Delete
                      - LateInitialize
                      - "*"
                    type: string
                  type: array
                providerConfigRef:
                  default:
                    name: default
                  description: |-
                    ProviderConfigReference specifies how the provider that will be used to
                    create, observe, update, and delete this managed resource should be
                    configured.
                  properties:
                    name:
                      description: Name of the referenced object.
                      type: string
                    policy:
                      description: Policies for referencing.
                      properties:
                        resolution:
                          default: Required
                          description: |-
                            Resolution specifies whether resolution of this reference is required.
                            The default is 'Required', which means the reconcile will fail if the
                            reference cannot be resolved. 'Optional' means this reference will be
                            a no-op if it cannot be resolved.
                          enum:
                            - Required
                            - Optional
                          type: string
                        resolve:
                          description: |-
                            Resolve specifies when this reference should be resolved. The default
                            is 'IfNotPresent', which will attempt to resolve the reference only when
                            the corresponding field is not present. Use 'Always' to resolve the
                            reference on every reconcile.
                          enum:
                            - Always
                            - IfNotPresent
                          type: string
                      type: object
                  required:
                    - name
                  type: object
                publishConnectionDetailsTo:
                  description: |-
                    PublishConnectionDetailsTo specifies the connection secret config which
                    contains a name, metadata and a reference to secret store config to
                    which any connection details for this managed resource should be written.
                    Connection details frequently include the endpoint, username,
                    and password required to connect to the managed resource.
                  properties:
                    configRef:
                      default:
                        name: default
                      description: |-
                        SecretStoreConfigRef specifies which secret store config should be used
                        for this ConnectionSecret.
                      properties:
                        name:
                          description: Name of the referenced object.
                          type: string
                        policy:
                          description: Policies for referencing.
                          properties:
                            resolution:
                              default: Required
                              description: |-
                                Resolution specifies whether resolution of this reference is required.
                                The default is 'Required', which means the reconcile will fail if the
                                reference cannot be resolved. 'Optional' means this reference will be
                                a no-op if it cannot be resolved.
                              enum:
                                - Required
                                - Optional
                              type: string
                            resolve:
                              description: |-
                                Resolve specifies when this reference should be resolved. The default
                                is 'IfNotPresent', which will attempt to resolve the reference only when
                                the corresponding field is not present. Use 'Always' to resolve the
                                reference on every reconcile.
                              enum:
                                - Always
                                - IfNotPresent
                              type: string
                          type: object
                      required:
                        - name
                      type: object
                    metadata:
                      description: Metadata is the metadata for connection secret.
                      properties:
                        annotations:
                          additionalProperties:
                            type: string
                          description: |-
                            Annotations are the annotations to be added to connection secret.
                            - For Kubernetes secrets, this will be used as "metadata.annotations".
                            - It is up to Secret Store implementation for others store types.
                          type: object
                        labels:
                          additionalProperties:
                            type: string
                          description: |-
                            Labels are the labels/tags to be added to connection secret.
                            - For Kubernetes secrets, this will be used as "metadata.labels".
                            - It is up to Secret Store implementation for others store types.
                          type: object
                        type:
                          description: |-
                            Type is the SecretType for the connection secret.
                            - Only valid for Kubernetes Secret Stores.
                          type: string
                      type: object
                    name:
                      description: Name is the name of the connection secret.
                      type: string
                  required:
                    - name
                  type: object
                writeConnectionSecretToRef:
                  description: |-
                    WriteConnectionSecretToReference specifies the namespace and name of a
                    Secret to which any connection details for this managed resource should
                    be written. Connection details frequently include the endpoint, username,
                    and password required to connect to the managed resource.
                    This field is planned to be replaced in a future release in favor of
                    PublishConnectionDetailsTo. Currently, both could be set independently
                    and connection details would be published to both without affecting
                    each other.
                  properties:
                    name:
                      description: Name of the secret.
                      type: string
                    namespace:
                      description: Namespace of the secret.
                      type: string
                  required:
                    - name
                    - namespace
                  type: object
              required:
                - forProvider
              type: object
            status:
              description:
                An OIDCClientGroupBindingStatus represents the observed state
                of an OIDCClientGroupBinding.
              properties:
                atProvider:
                  description:
                    OIDCClientGroupBindingObservation are the observable
                    fields of an OIDCClientGroupBinding.
                  properties:
                    client:
                      description: Client contains the full OIDC client information.
                      properties:
                        callbackURLs:
                          description: CallbackURLs are the configured redirect URIs.
                          items:
                            type: string
                          type: array
                        credentials:
                          description:
                            Credentials contain the federated authentication
                            configuration.
                          properties:
                            federatedIdentities:
                              description: |-
                                FederatedIdentities configure JWT-based client authentication.
                                This allows clients to authenticate using JWTs from trusted issuers.
                              items:
                                description:
                                  OIDCClientCredentialsFederatedIdentity
                                  are the configurable fields of an OIDCClient's federated
                                  identity credentials.
                                properties:
                                  audience:
                                    description: |-
                                      Audience must match the 'aud' claim in JWT tokens.
                                      This verifies the intended recipient of the token.
                                    type: string
                                  issuer:
                                    description: |-
                                      Issuer must match the 'iss' claim in JWT tokens from the external IdP.
                                      This identifies the trusted token issuer.
                                    type: string
                                  jwks:
                                    description: |-
                                      JWKS is the JSON Web Key Set URL for verifying JWT signatures.
                                      If empty, defaults to <issuer>/.well-known/jwks.json
                                    type: string
                                  subject:
                                    description: |-
                                      Subject must match the 'sub' claim in JWT tokens.
                                      If empty, defaults to the OIDC client UUID.
                                    type: string
                                required:
                                  - issuer
                                type: object
                              type: array
                          type: object
                        hasLogo:
                          description:
                            HasLogo indicates whether a logo has been uploaded
                            for this client.
                          type: boolean
                        id:
                          description:
                            ID is the unique identifier of the OIDC client
                            in Pocket ID.
                          type: string
                        isPublic:
                          description: IsPublic indicates if this is a public client.
                          type: boolean
                        launchURL:
                          description: LaunchURL is the application's main URL.
                          type: string
                        logoUrl:
                          description: LogoURL is the configured logo URL for this client.
                          type: string
                        logoutCallbackURLs:
                          description:
                            LogoutCallbackURLs are the configured logout
                            redirect URIs.
                          items:
                            type: string
                          type: array
                        name:
                          description: Name is the display name of the OIDC client application.
                          type: string
                        pkceEnabled:
                          description: PkceEnabled indicates if PKCE is required.
                          type: boolean
                        requiresReauthentication:
                          description:
                            RequiresReauthentication indicates if re-authentication
                            is required.
                          type: boolean
                      required:
                        - id
                        - name
                      type: object
                    group:
                      description: Group contains the full group information.
                      properties:
                        createdAt:
                          description:
                            CreatedAt is the timestamp when the group was
                            created.
                          type: string
                        customClaims:
                          additionalProperties:
                            type: string
                          description:
                            CustomClaims are the custom key-value pairs included
                            in JWT tokens for group members.
                          type: object
                        friendlyName:
                          description: FriendlyName is the group's display name.
                          type: string
                        id:
                          description:
                            ID is the unique identifier of the group in Pocket
                            ID.
                          type: string
                        name:
                          description: Name is the group's unique name.
                          type: string
                      required:
                        - friendlyName
                        - id
                        - name
                      type: object
                  required:
                    - client
                    - group
                  type: object
                conditions:
                  description: Conditions of the resource.
                  items:
                    description: A Condition that may apply to a resource.
                    properties:
                      lastTransitionTime:
                        description: |-
                          LastTransitionTime is the last time this condition transitioned from one
                          status to another.
                        format: date-time
                        type: string
                      message:
                        description: |-
                          A Message containing details about this condition's last transition from
                          one status to another, if any.
                        type: string
                      observedGeneration:
                        description: |-
                          ObservedGeneration represents the .metadata.generation that the condition was set based upon.
                          For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                          with respect to the current state of the instance.
                        format: int64
                        type: integer
                      reason:
                        description:
                          A Reason for this condition's last transition from
                          one status to another.
                        type: string
                      status:
                        description:
                          Status of this condition; is it currently True,
                          False, or Unknown?
                        type: string
                      type:
                        description: |-
                          Type of this condition. At most one of each condition type may apply to
                          a resource at any point in time.
                        type: string
                    required:
                      - lastTransitionTime
                      - reason
                      - status
                      - type
                    type: object
                  type: array
                  x-kubernetes-list-map-keys:
                    - type
                  x-kubernetes-list-type: map
                observedGeneration:
                  description: |-
                    ObservedGeneration is the latest metadata.generation
                    which resulted in either a ready state, or stalled due to error
                    it can not recover from without human intervention.
                  format: int64
                  type: integer
              type: object
          required:
            - spec
          type: object
      served: true
      storage: true
      subresources:
        status: {}
